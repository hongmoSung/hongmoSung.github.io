---
title: "Spring DIì™€ IoC"
categories:
  - spring
tags:
  - DI
  - Ioc
  - ì˜ì¡´ì£¼ì…
  - í† ë¹„ìŠ¤í”„ë§
toc: true
mermaid: true
---

# Spring DIì™€ IoC

## ì½”ë“œ

```java
public class HellobootApplication {
    public static void main(String[] args) {
        // 1. IoC ì»¨í…Œì´ë„ˆ ìƒì„±
        GenericApplicationContext applicationContext = new GenericApplicationContext();

        // 2. ë¹ˆ ë“±ë¡ - "ì´ í´ë˜ìŠ¤ë“¤ì„ ê´€ë¦¬í•´ì£¼ì„¸ìš”!"
        applicationContext.registerBean(HelloController.class);
        applicationContext.registerBean(SimpleHelloService.class);

        // 3. ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” - "ì´ì œ ê°ì²´ë“¤ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”!"
        applicationContext.refresh();

        // ... ì›¹ì„œë²„ ì„¤ì • ...

        // 4. ë¹ˆ ì¡°íšŒ - "HelloController ì£¼ì„¸ìš”!"
        HelloController helloController = applicationContext.getBean(HelloController.class);
        String ret = helloController.hello(name);
    }
}
```

## ğŸ”„ IoC (Inversion of Control) - ì œì–´ì˜ ì—­ì „

### ì½”ë“œì—ì„œ IoC ì°¾ê¸°

**ì¼ë°˜ì ì¸ ë°©ì‹**:

```java
// ê°œë°œìê°€ ì§ì ‘ ê´€ë¦¬
HelloController controller = new HelloController();
SimpleHelloService service = new SimpleHelloService();
```

**IoC ë°©ì‹**:

```java
// Spring ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬
GenericApplicationContext applicationContext = new GenericApplicationContext();
applicationContext.

registerBean(HelloController .class);     // "ê´€ë¦¬í•´ì£¼ì„¸ìš”"
applicationContext.

registerBean(SimpleHelloService .class);  // "ê´€ë¦¬í•´ì£¼ì„¸ìš”"
applicationContext.

refresh();                               // "ì´ì œ ë§Œë“¤ì–´ì£¼ì„¸ìš”"

// í•„ìš”í•  ë•Œ ìš”ì²­
HelloController helloController = applicationContext.getBean(HelloController.class);
```

### ğŸ¯ IoCì˜ í•µì‹¬

**ì œì–´ê¶Œì´ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤!**

- **Before**: ê°œë°œìê°€ ì§ì ‘ `new HelloController()`
- **After**: ì»¨í…Œì´ë„ˆê°€ `applicationContext.getBean()`

**ë¹„ìœ **:

- **ì¼ë°˜ì ì¸ ë°©ì‹**: ë‚´ê°€ ì§ì ‘ ìš”ë¦¬í•˜ê¸°
- **IoC ë°©ì‹**: ìš”ë¦¬ì‚¬(Spring ì»¨í…Œì´ë„ˆ)ì—ê²Œ ì£¼ë¬¸í•˜ê³  ë°›ì•„ë¨¹ê¸°

## ğŸ’‰ DI (Dependency Injection) - ì˜ì¡´ì„± ì£¼ì…

### HelloControllerëŠ” SimpleHelloServiceê°€ í•„ìš”í•´ìš”!

```java
public class HelloController {
    // SimpleHelloServiceê°€ í•„ìš”í•©ë‹ˆë‹¤! (ì˜ì¡´ì„±)
    public String hello(String name) {
        // ì—¬ê¸°ì„œ SimpleHelloServiceë¥¼ ì–´ë–»ê²Œ ì–»ì„ê¹Œìš”?
        return "Hello " + name;
    }
}
```

**ë¬¸ì œ**: HelloControllerê°€ SimpleHelloServiceë¥¼ ì–´ë–»ê²Œ ì–»ì„ê¹Œìš”?

### âŒ ì˜ëª»ëœ ë°©ë²•: ì§ì ‘ ìƒì„±

```java
public class HelloController {
    public String hello(String name) {
        // ë§¤ë²ˆ ìƒˆë¡œ ìƒì„± - ë©”ëª¨ë¦¬ ë‚­ë¹„!
        SimpleHelloService service = new SimpleHelloService();
        return service.sayHello(name);
    }
}
```

**ë¬¸ì œì **:

- ë§¤ë²ˆ ìƒˆ ê°ì²´ ìƒì„± (ë©”ëª¨ë¦¬ ë‚­ë¹„)
- HelloControllerê°€ SimpleHelloServiceì— ê°•í•˜ê²Œ ê²°í•©
- í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ì›€
- ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¡œ ë°”ê¾¸ê¸° ì–´ë ¤ì›€

## ğŸ¯ DIì˜ ì„¸ ê°€ì§€ ë°©ë²•

### 1. ìƒì„±ì ì£¼ì… (Constructor Injection) â­ **ì¶”ì²œ!**

```java
public class HelloController {
    private final SimpleHelloService helloService;  // final ì‚¬ìš© ê°€ëŠ¥!

    // ìƒì„±ìë¥¼ í†µí•´ ì˜ì¡´ì„± ì£¼ì…ë°›ê¸°
    public HelloController(SimpleHelloService helloService) {
        this.helloService = helloService;
    }

    public String hello(String name) {
        return helloService.sayHello(name);  // ì£¼ì…ë°›ì€ ì„œë¹„ìŠ¤ ì‚¬ìš©
    }
}
```

**Spring ì»¨í…Œì´ë„ˆê°€ í•˜ëŠ” ì¼**:

```java
// 1. SimpleHelloService ìƒì„±
SimpleHelloService service = new SimpleHelloService();

// 2. HelloController ìƒì„±í•˜ë©´ì„œ ì„œë¹„ìŠ¤ ì£¼ì…
HelloController controller = new HelloController(service);

// 3. ì»¨í…Œì´ë„ˆì— ì €ì¥
applicationContextì— ì €ì¥
```

**ì¥ì **:

- âœ… **ë¶ˆë³€ì„± ë³´ì¥**: `final` í‚¤ì›Œë“œ ì‚¬ìš© ê°€ëŠ¥
- âœ… **í•„ìˆ˜ ì˜ì¡´ì„± ëª…ì‹œ**: ìƒì„±ì íŒŒë¼ë¯¸í„°ë¡œ ëª…í™•íˆ í‘œí˜„
- âœ… **í…ŒìŠ¤íŠ¸ ìš©ì´**: `new HelloController(mockService)` ê°€ëŠ¥
- âœ… **ìˆœí™˜ ì°¸ì¡° ë°©ì§€**: ì»´íŒŒì¼ ì‹œì ì—ì„œ ë°œê²¬

### 2. í•„ë“œ ì£¼ì… (Field Injection) âš ï¸ **ì£¼ì˜**

```java
public class HelloController {
    @Autowired
    private SimpleHelloService helloService;  // í•„ë“œì— ì§ì ‘ ì£¼ì…

    public String hello(String name) {
        return helloService.sayHello(name);
    }
}
```

**Spring ì»¨í…Œì´ë„ˆê°€ í•˜ëŠ” ì¼**:

```java
// 1. HelloController ìƒì„± (ë¹ˆ ìƒì„±ìë¡œ)
HelloController controller = new HelloController();

// 2. Reflectionìœ¼ë¡œ í•„ë“œì— ì£¼ì…
// controller.helloService = applicationContext.getBean(SimpleHelloService.class);
```

**ì¥ì **:

- âœ… ì½”ë“œê°€ ê°„ê²°í•¨

**ë‹¨ì **:

- âŒ `final` ì‚¬ìš© ë¶ˆê°€ (ë¶ˆë³€ì„± ë³´ì¥ ì•ˆë¨)
- âŒ í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ì›€ (Reflection í•„ìš”)
- âŒ ì˜ì¡´ì„±ì´ ìˆ¨ê²¨ì§ (ì–¼ë§ˆë‚˜ ë§ì€ ì˜ì¡´ì„±ì´ ìˆëŠ”ì§€ ëª¨ë¦„)

### 3. ì„¸í„° ì£¼ì… (Setter Injection) ğŸ¤” **ì„ íƒì  ì‚¬ìš©**

```java
public class HelloController {
    private SimpleHelloService helloService;

    @Autowired
    public void setHelloService(SimpleHelloService helloService) {
        this.helloService = helloService;
    }

    public String hello(String name) {
        return helloService.sayHello(name);
    }
}
```

**Spring ì»¨í…Œì´ë„ˆê°€ í•˜ëŠ” ì¼**:

```java
// 1. HelloController ìƒì„±
HelloController controller = new HelloController();

// 2. setter ë©”ì„œë“œ í˜¸ì¶œí•˜ì—¬ ì£¼ì…
controller.

setHelloService(applicationContext.getBean(SimpleHelloService.class));
```

**ì¥ì **:

- âœ… **ì„ íƒì  ì˜ì¡´ì„±**: ê¼­ í•„ìš”í•˜ì§€ ì•Šì€ ì˜ì¡´ì„± í‘œí˜„ ê°€ëŠ¥
- âœ… **ëŸ°íƒ€ì„ ë³€ê²½**: ì‹¤í–‰ ì¤‘ì— ì˜ì¡´ì„± êµì²´ ê°€ëŠ¥

**ë‹¨ì **:

- âŒ `final` ì‚¬ìš© ë¶ˆê°€
- âŒ ì˜ì¡´ì„± ëˆ„ë½ ìœ„í—˜ (setterë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ)

## ğŸ­ Spring ì»¨í…Œì´ë„ˆì˜ ë§ˆë²•

ì½”ë“œì—ì„œ ì¼ì–´ë‚˜ëŠ” ì¼ì„ ë‹¨ê³„ë³„ë¡œ ì‚´í´ë³´ì„¸ìš”:

### 1ë‹¨ê³„: ì»¨í…Œì´ë„ˆ ìƒì„±

```java
GenericApplicationContext applicationContext = new GenericApplicationContext();
```

**ì»¨í…Œì´ë„ˆ**: "ì•ˆë…•í•˜ì„¸ìš”! ê°ì²´ ê´€ë¦¬ ì„œë¹„ìŠ¤ ì‹œì‘í•©ë‹ˆë‹¤!"

### 2ë‹¨ê³„: ë¹ˆ ë“±ë¡

```java
applicationContext.registerBean(HelloController .class);
applicationContext.

registerBean(SimpleHelloService .class);
```

**ì»¨í…Œì´ë„ˆ**: "HelloControllerì™€ SimpleHelloServiceë¥¼ ë“±ë¡í–ˆìŠµë‹ˆë‹¤!"

### 3ë‹¨ê³„: ì˜ì¡´ì„± ë¶„ì„ ë° ê°ì²´ ìƒì„±

```java
applicationContext.refresh();
```

**ì»¨í…Œì´ë„ˆì˜ ë¶„ì„**:

```shell
"ìŒ... HelloController ìƒì„±ìë¥¼ ë³´ë‹ˆ SimpleHelloServiceê°€ í•„ìš”í•˜ë„¤ìš”.
1. ë¨¼ì € SimpleHelloServiceë¥¼ ë§Œë“¤ê³ 
2. ê·¸ë‹¤ìŒ HelloControllerë¥¼ ë§Œë“¤ë©´ì„œ SimpleHelloServiceë¥¼ ì£¼ì…í•´ì£¼ê² ìŠµë‹ˆë‹¤!"
```

### 4ë‹¨ê³„: ë¹ˆ ì¡°íšŒ

```java
HelloController helloController = applicationContext.getBean(HelloController.class);
```

**ì»¨í…Œì´ë„ˆ**: "ì´ë¯¸ ë§Œë“¤ì–´ë†“ì€ HelloControllerë¥¼ ë“œë¦½ë‹ˆë‹¤!"

## ğŸ¯ í•µì‹¬ ì •ë¦¬

### IoC (ì œì–´ì˜ ì—­ì „)

```java
// ì—¬ëŸ¬ë¶„ì˜ ì½”ë“œì—ì„œ
GenericApplicationContext applicationContext = new GenericApplicationContext();
applicationContext.

registerBean(HelloController .class);  // ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬!
```

**ì œì–´ê¶Œì´ ê°œë°œì â†’ Spring ì»¨í…Œì´ë„ˆë¡œ ì´ë™**

### DI (ì˜ì¡´ì„± ì£¼ì…)

```java
// HelloControllerê°€ SimpleHelloServiceë¥¼ ì£¼ì…ë°›ìŒ
public HelloController(SimpleHelloService helloService) {
    this.helloService = helloService;  // ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ìŒ!
}
```

**í•„ìš”í•œ ì˜ì¡´ì„±ì„ ì™¸ë¶€ì—ì„œ ë„£ì–´ì¤Œ**

## ref

[í† ë¹„-ìŠ¤í”„ë§ë¶€íŠ¸-ì´í•´ì™€ì›ë¦¬](https://www.inflearn.com/course/í† ë¹„-ìŠ¤í”„ë§ë¶€íŠ¸-ì´í•´ì™€ì›ë¦¬)