---
title: "Java í•´ì‹±"
categories:
  - java
tags:
  - hash
toc: true
mermaid: true
---

## ì‹œì‘í•˜ê¸°

### í•´ì‹œ(Hash)ë€ ë¬´ì—‡ì¸ê°€ìš”?

í•´ì‹œëŠ” **ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ê¸° ìœ„í•œ ê¸°ìˆ **ì…ë‹ˆë‹¤.

#### ì˜ˆì‹œ: ğŸ ì•„íŒŒíŠ¸ ìš°í¸í•¨

```
ì•„íŒŒíŠ¸ ìš°í¸í•¨ì„ ìƒê°í•´ë³´ì„¸ìš”:
- ê¹€ì² ìˆ˜(101í˜¸) â†’ 1ë²ˆ ìš°í¸í•¨
- ë°•ì˜í¬(102í˜¸) â†’ 2ë²ˆ ìš°í¸í•¨  
- ì´ë¯¼ìˆ˜(103í˜¸) â†’ 3ë²ˆ ìš°í¸í•¨

ì§‘ ì£¼ì†Œ(í‚¤)ë¥¼ ë³´ë©´ ë°”ë¡œ ìš°í¸í•¨ ë²ˆí˜¸(ìœ„ì¹˜)ë¥¼ ì•Œ ìˆ˜ ìˆì–´ìš”!
```

Javaì˜ HashMapë„ ì´ì™€ ë˜‘ê°™ì´ ë™ì‘í•©ë‹ˆë‹¤.

### ì™œ í•´ì‹œë¥¼ ì•Œì•„ì•¼ í•˜ë‚˜ìš”?

#### ì‹¤ë¬´ì—ì„œ ë§¤ì¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ

```java
// ì´ëŸ° ì½”ë“œë¥¼ ìì£¼ ì‘ì„±í•˜ì§€ ì•Šë‚˜ìš”?
Map<String, User> userMap = new HashMap<>();
Set<String> uniqueIds = new HashSet<>();
```

#### ğŸš€ ì„±ëŠ¥ì˜ ì°¨ì´

```java
// ArrayListë¡œ ì‚¬ìš©ì ì°¾ê¸° (ëŠë¦¼)
List<User> userList = new ArrayList<>();
for(
    User user :userList){
    if(user.getId().equals("user123")){
        return user; // ìµœëŒ€ 1000ë²ˆ ë¹„êµí•´ì•¼ í•¨
    }
}

// HashMapìœ¼ë¡œ ì‚¬ìš©ì ì°¾ê¸° (ë¹ ë¦„)
Map<String, User> userMap = new HashMap<>();
User user = userMap.get("user123"); // 1ë²ˆë§Œì— ì°¾ìŒ!
```

### ì²« ë²ˆì§¸ HashMap ì‚¬ìš©í•˜ê¸°

#### ê¸°ë³¸ ì‚¬ìš©ë²•

```java
public class FirstHashMap {
    public static void main(String[] args) {
        // 1. HashMap ìƒì„±
        Map<String, String> map = new HashMap<>();

        // 2. ë°ì´í„° ì¶”ê°€
        map.put("apple", "ì‚¬ê³¼");
        map.put("banana", "ë°”ë‚˜ë‚˜");
        map.put("cherry", "ì²´ë¦¬");

        // 3. ë°ì´í„° ì¡°íšŒ
        String apple = map.get("apple");
        System.out.println(apple); // "ì‚¬ê³¼"

        // 4. ë°ì´í„° ì¡´ì¬ í™•ì¸
        if (map.containsKey("apple")) {
            System.out.println("ì‚¬ê³¼ê°€ ìˆì–´ìš”!");
        }

        // 5. ëª¨ë“  ë°ì´í„° ì¶œë ¥
        for (String key : map.keySet()) {
            System.out.println(key + " = " + map.get(key));
        }
    }
}
```

---

## í•µì‹¬ ê°œë…

### HashMap ê¸°ë³¸ ì‚¬ìš©ë²•

#### ì£¼ìš” ë©”ì„œë“œë“¤

| ë©”ì„œë“œ                | ì„¤ëª…        | ì˜ˆì‹œ                              |
|--------------------|-----------|---------------------------------|
| `put(key, value)`  | ë°ì´í„° ì¶”ê°€/ìˆ˜ì • | `map.put("name", "ê¹€ì² ìˆ˜")`        |
| `get(key)`         | ë°ì´í„° ì¡°íšŒ    | `String name = map.get("name")` |
| `remove(key)`      | ë°ì´í„° ì‚­ì œ    | `map.remove("name")`            |
| `containsKey(key)` | í‚¤ ì¡´ì¬ í™•ì¸   | `if (map.containsKey("name"))`  |
| `size()`           | í¬ê¸° í™•ì¸     | `int size = map.size()`         |
| `isEmpty()`        | ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸  | `if (map.isEmpty())`            |

#### ì‹¤ë¬´ ì˜ˆì‹œ: ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œ

```java
public class UserManager {
    private Map<String, User> users = new HashMap<>();

    // ì‚¬ìš©ì ì¶”ê°€
    public void addUser(User user) {
        users.put(user.getId(), user);
    }

    // ì‚¬ìš©ì ì¡°íšŒ
    public User getUser(String userId) {
        return users.get(userId);
    }

    // ì‚¬ìš©ì ì¡´ì¬ í™•ì¸
    public boolean hasUser(String userId) {
        return users.containsKey(userId);
    }

    // ì „ì²´ ì‚¬ìš©ì ìˆ˜
    public int getUserCount() {
        return users.size();
    }
}
```

### hashCode()ì™€ equals() - ê°€ì¥ ì¤‘ìš”í•œ ê°œë…!

#### ì™œ ì¤‘ìš”í•œê°€ìš”?

```java
// ì´ëŸ° ìƒí™©ì„ ìƒê°í•´ë³´ì„¸ìš”
Person person1 = new Person("ê¹€ì² ìˆ˜", 25);
Person person2 = new Person("ê¹€ì² ìˆ˜", 25);

// ê°™ì€ ì‚¬ëŒì¸ë° ë‹¤ë¥¸ ê°ì²´ì˜ˆìš”!
System.out.println(person1 == person2); // false
```

#### âœ… ì˜¬ë°”ë¥¸ êµ¬í˜„

```java
public class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;

        Person person = (Person) obj;
        return age == person.age &&
                Objects.equals(name, person.name);
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age);
    }
}
```

#### ğŸ§ª í…ŒìŠ¤íŠ¸í•´ë³´ê¸°

```java
public class Test {
    public static void main(String[] args) {
        Person person1 = new Person("ê¹€ì² ìˆ˜", 25);
        Person person2 = new Person("ê¹€ì² ìˆ˜", 25);

        // ì´ì œ ë…¼ë¦¬ì ìœ¼ë¡œ ê°™ì€ ê°ì²´ë¡œ ì¸ì‹ë©ë‹ˆë‹¤
        System.out.println(person1.equals(person2)); // true
        System.out.println(person1.hashCode() == person2.hashCode()); // true

        // HashMapì—ì„œë„ ê°™ì€ í‚¤ë¡œ ì¸ì‹ë©ë‹ˆë‹¤
        Map<Person, String> map = new HashMap<>();
        map.put(person1, "ì²« ë²ˆì§¸ ì‚¬ëŒ");
        System.out.println(map.get(person2)); // "ì²« ë²ˆì§¸ ì‚¬ëŒ"
    }
}
```

### ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ë“¤

#### ğŸ› ì‹¤ìˆ˜ 1: hashCode() ì¬ì •ì˜ ì•ˆ í•¨

```java
// âŒ ì˜ëª»ëœ ì˜ˆ
public class BadPerson {
    private String name;
    private int age;

    @Override
    public boolean equals(Object obj) {
        // equalsë§Œ ì¬ì •ì˜í•˜ê³  hashCodeëŠ” ì¬ì •ì˜ ì•ˆ í•¨
        BadPerson other = (BadPerson) obj;
        return name.equals(other.name) && age == other.age;
    }
    // hashCode() ì¬ì •ì˜ ì•ˆ í•¨ - í° ë¬¸ì œ!
}

// ê²°ê³¼: HashMapì—ì„œ ì •ìƒ ë™ì‘ ì•ˆ í•¨
Set<BadPerson> set = new HashSet<>();
set.add(new BadPerson("ê¹€ì² ìˆ˜", 25)); 
set.add(new BadPerson("ê¹€ì² ìˆ˜", 25)); // ì¤‘ë³µ ì €ì¥ë¨!
        
System.out.println(set.size()); // 2 (ì˜ëª»ë¨!)
```

#### ğŸ› ì‹¤ìˆ˜ 2: ê°€ë³€ ê°ì²´ë¥¼ í‚¤ë¡œ ì‚¬ìš©

```java
// âŒ ìœ„í—˜í•œ ì˜ˆ
List<String> mutableKey = new ArrayList<>();
mutableKey.add("key1");

Map<List<String>, String> map = new HashMap<>();
map.put(mutableKey, "value");

// í‚¤ë¥¼ ë³€ê²½í•˜ë©´ ë¬¸ì œ ë°œìƒ!
mutableKey.add("key2"); // í‚¤ê°€ ë³€ê²½ë¨

String value = map.get(mutableKey); // null ë°˜í™˜! ì°¾ì„ ìˆ˜ ì—†ìŒ
```

#### ğŸ› ì‹¤ìˆ˜ 3: null ì²˜ë¦¬ ì•ˆ í•¨

```java
// âŒ ìœ„í—˜í•œ ì˜ˆ
Map<String, User> userMap = new HashMap<>();
User user = userMap.get("unknown"); // null ë°˜í™˜ ê°€ëŠ¥
user.getName(); // NullPointerException ë°œìƒ!

// âœ… ì•ˆì „í•œ ì˜ˆ
User user = userMap.get("unknown");
if(user !=null){
     System.out.println(user.getName());
}

// ë˜ëŠ”
String name = userMap.getOrDefault("unknown", new User()).getName();
```

---

## ì‹¤ë¬´ í™œìš©

### Map ì¸í„°í˜ì´ìŠ¤ vs êµ¬í˜„ì²´

#### ğŸ¯ ì˜¬ë°”ë¥¸ ì„ ì–¸ ë°©ë²•

```java
// âœ… ê¶Œì¥: ì¸í„°í˜ì´ìŠ¤ íƒ€ì…ìœ¼ë¡œ ì„ ì–¸
Map<String, User> userMap = new HashMap<>();

// âŒ ë¹„ê¶Œì¥: êµ¬í˜„ì²´ íƒ€ì…ìœ¼ë¡œ ì„ ì–¸
HashMap<String, User> userMap = new HashMap<>();
```

#### ğŸ¤” ì™œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í• ê¹Œìš”?

```java
public class UserService {
    // ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©ìœ¼ë¡œ ìœ ì—°ì„± í™•ë³´
    private Map<String, User> users;

    public UserService(boolean needsOrdering) {
        if (needsOrdering) {
            users = new LinkedHashMap<>(); // ìˆœì„œ ìœ ì§€
        } else {
            users = new HashMap<>();      // ì¼ë°˜ì ì¸ ê²½ìš°
        }
    }

    public void processUsers(Map<String, User> userMap) {
        // HashMap, LinkedHashMap, TreeMap ëª¨ë‘ ë°›ì„ ìˆ˜ ìˆìŒ
        for (User user : userMap.values()) {
            // ì²˜ë¦¬ ë¡œì§
        }
    }
}
```

### ì–¸ì œ ì–´ë–¤ Mapì„ ì‚¬ìš©í• ê¹Œìš”?

#### ğŸ“Š Map êµ¬í˜„ì²´ ë¹„êµ

| êµ¬í˜„ì²´                   | íŠ¹ì§•     | ì–¸ì œ ì‚¬ìš©?   | ì˜ˆì‹œ       |
|-----------------------|--------|----------|----------|
| **HashMap**           | ê°€ì¥ ë¹ ë¦„  | ì¼ë°˜ì ì¸ ê²½ìš°  | ì‚¬ìš©ì ìºì‹œ   |
| **LinkedHashMap**     | ìˆœì„œ ìœ ì§€  | ì…ë ¥ ìˆœì„œ ì¤‘ìš” | ì„¤ì • íŒŒì¼    |
| **TreeMap**           | ì •ë ¬ë¨    | ì •ë ¬ í•„ìš”    | í•™ìƒ ì„±ì  ìˆœìœ„ |
| **ConcurrentHashMap** | ìŠ¤ë ˆë“œ ì•ˆì „ | ë©€í‹°ìŠ¤ë ˆë“œ    | ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ |

#### ì‹¤ë¬´ ì‚¬ìš© ì˜ˆì‹œ

```java
// ì¼ë°˜ì ì¸ ìºì‹œ - HashMap
Map<String, User> userCache = new HashMap<>();

// ì…ë ¥ ìˆœì„œ ìœ ì§€ - LinkedHashMap
Map<String, String> configMap = new LinkedHashMap<>();
configMap.put("database.url","jdbc:mysql://localhost");
configMap.put("database.user","admin");
configMap.put("database.password","secret");

// ì •ë ¬ í•„ìš” - TreeMap
Map<String, Integer> scoreMap = new TreeMap<>();
scoreMap.put("ê¹€ì² ìˆ˜",95);
scoreMap.put("ë°•ì˜í¬",87);
scoreMap.put("ì´ë¯¼ìˆ˜",92);
// ìë™ìœ¼ë¡œ ì´ë¦„ ìˆœìœ¼ë¡œ ì •ë ¬ë¨

// ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ - ConcurrentHashMap
Map<String, User> threadSafeMap = new ConcurrentHashMap<>();
```

### ì„±ëŠ¥ ìµœì í™” ê¸°ë³¸

#### ì´ˆê¸° ìš©ëŸ‰ ì„¤ì •

```java
// âŒ ì„±ëŠ¥ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
Map<String, User> map = new HashMap<>(); // ê¸°ë³¸ ìš©ëŸ‰ 16
// 1000ê°œ ë°ì´í„° ì¶”ê°€ ì‹œ ì—¬ëŸ¬ ë²ˆ ë¦¬ì‚¬ì´ì§• ë°œìƒ

// âœ… ì„±ëŠ¥ ìµœì í™”
int expectedSize = 1000;
Map<String, User> map = new HashMap<>(expectedSize * 4 / 3 + 1);
// ë¦¬ì‚¬ì´ì§• ì—†ì´ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥
```

#### ğŸ“Š ì„±ëŠ¥ ì¸¡ì • ì˜ˆì‹œ

```java
public class PerformanceTest {
    public static void main(String[] args) {
        // ì‘ì€ ë§µ vs í° ë§µ ì„±ëŠ¥ ë¹„êµ
        testMapPerformance(16);    // ê¸°ë³¸ í¬ê¸°
        testMapPerformance(1000);  // ìµœì í™”ëœ í¬ê¸°
    }

    private static void testMapPerformance(int initialCapacity) {
        Map<String, Integer> map = new HashMap<>(initialCapacity);

        long startTime = System.currentTimeMillis();

        // 10,000ê°œ ë°ì´í„° ì¶”ê°€
        for (int i = 0; i < 10000; i++) {
            map.put("key" + i, i);
        }

        long endTime = System.currentTimeMillis();
        System.out.println("ìš©ëŸ‰ " + initialCapacity + ": " + (endTime - startTime) + "ms");
    }
}
```

---

## ì‹¬í™” ë‚´ìš©

### ë‚´ë¶€ êµ¬ì¡° ì´í•´í•˜ê¸°

#### ğŸ—ï¸ HashMapì€ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œìš”?

```java
// ê°„ë‹¨í•œ HashMap ë™ì‘ ì›ë¦¬
Map<String, String> map = new HashMap<>();
map.put("apple","ì‚¬ê³¼");

// ë‚´ë¶€ì ìœ¼ë¡œ ì´ëŸ° ê³¼ì •ì„ ê±°ì¹©ë‹ˆë‹¤:
// 1. "apple".hashCode() ê³„ì‚° â†’ ì˜ˆ: 93029210
// 2. ë°°ì—´ ì¸ë±ìŠ¤ ê³„ì‚° â†’ 93029210 % 16 = 10
// 3. 10ë²ˆ ë°°ì—´ì— ì €ì¥
```

#### ğŸ”„ í•´ì‹œ ì¶©ëŒì´ ë°œìƒí•˜ë©´?

```java
// ë§Œì•½ ë‘ í‚¤ê°€ ê°™ì€ ìœ„ì¹˜ì— ì €ì¥ë˜ë ¤ í•˜ë©´?
map.put("apple","ì‚¬ê³¼");   // 10ë²ˆ ìœ„ì¹˜
map.put("grape","í¬ë„");   // ìš°ì—°íˆ 10ë²ˆ ìœ„ì¹˜

// Java 8 ì´ì „: ì—°ê²° ë¦¬ìŠ¤íŠ¸ë¡œ ì €ì¥
// Java 8 ì´í›„: 8ê°œ ì´ìƒ ìŒ“ì´ë©´ íŠ¸ë¦¬ë¡œ ë³€í™˜ (ë” ë¹ ë¦„)
```

### JVM ë ˆë²¨ ì´í•´

#### JVM ì „ì²´ êµ¬ì¡°ì—ì„œ HashMapì˜ ìœ„ì¹˜

```mermaid
graph TB
    subgraph "JVM ë©”ëª¨ë¦¬ êµ¬ì¡°"
        subgraph "í™ ë©”ëª¨ë¦¬ (Heap)"
            A[HashMap ê°ì²´]
            B[Node ë°°ì—´]
            C[ì‹¤ì œ ë°ì´í„°ë“¤]
        end

        subgraph "ìŠ¤íƒ ë©”ëª¨ë¦¬ (Stack)"
            D[ì§€ì—­ë³€ìˆ˜ë“¤]
            E[ë©”ì„œë“œ í˜¸ì¶œ ì •ë³´]
        end

        subgraph "ë©”ì„œë“œ ì˜ì—­ (Method Area)"
            F[HashMap í´ë˜ìŠ¤ ì •ë³´]
            G[hashCode ë©”ì„œë“œ ë°”ì´íŠ¸ì½”ë“œ]
        end

        subgraph "PC ë ˆì§€ìŠ¤í„°"
            H[í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ëª…ë ¹ì–´]
        end
    end

    D --> A
    A --> B
    B --> C
    F --> A
    H --> G
```

#### í•´ì‹œ ê³„ì‚° ê³¼ì • (JVM ë‚´ë¶€)

```mermaid
flowchart TD
    A[ìë°” ì½”ë“œ: map.get key] --> B[ë°”ì´íŠ¸ì½”ë“œë¡œ ë³€í™˜]
    B --> C[JVMì´ ë°”ì´íŠ¸ì½”ë“œ ì‹¤í–‰]
    C --> D[key.hashCode í˜¸ì¶œ]
    D --> E{í•´ì‹œ ì½”ë“œ ê³„ì‚° ë°©ì‹}
    E -->|String ë“±| F[ìë°” ë©”ì„œë“œ ì‹¤í–‰]
    E -->|Object ê¸°ë³¸| G[ë„¤ì´í‹°ë¸Œ ë©”ì„œë“œ í˜¸ì¶œ]
    F --> H[ë¬¸ìì—´ ê¸°ë°˜ ê³„ì‚°]
    G --> I[ë©”ëª¨ë¦¬ ì£¼ì†Œ ê¸°ë°˜ ê³„ì‚°]
    H --> J[í•´ì‹œ ì½”ë“œ ë°˜í™˜]
    I --> J
    J --> K[ë°°ì—´ ì¸ë±ìŠ¤ ê³„ì‚°]
    K --> L[í•´ë‹¹ ìœ„ì¹˜ì—ì„œ ë°ì´í„° ì°¾ê¸°]
    L --> M[ê²°ê³¼ ë°˜í™˜]
```

#### HashMap ë©”ëª¨ë¦¬ ë ˆì´ì•„ì›ƒ

```mermaid
graph TB
    subgraph "ì‹¤ì œ í™ ë©”ëª¨ë¦¬ êµ¬ì¡°"
        HM[HashMap ê°ì²´<br/>size: 3<br/>capacity: 16]

        subgraph "Node ë°°ì—´ (table)"
            T0[0: null]
            T1[1: Node-A]
            T2[2: null]
            T3[3: Node-B]
            T4[4: null]
            T5[5: Node-C]
            T6[6: null]
            T7[7: null]
        end

        subgraph "ì‹¤ì œ Node ê°ì²´ë“¤"
            NA[Node A<br/>key: apple<br/>value: ì‚¬ê³¼<br/>next: null]
            NB[Node B<br/>key: banana<br/>value: ë°”ë‚˜ë‚˜<br/>next: null]
            NC[Node C<br/>key: cherry<br/>value: ì²´ë¦¬<br/>next: null]
        end
    end

    HM --> T1
    HM --> T3
    HM --> T5
    T1 --> NA
    T3 --> NB
    T5 --> NC
```
