---
title: "Java ì œë„¤ë¦­"
categories:
  - java
tags:
  - generic
  - ì œë„¤ë¦­
toc: true
mermaid: true
---

## ì¬ë„¤ë¦­ì´ë€? 

ì œë„¤ë¦­ì´ë€ ì‰½ê²Œ ë§í•´ì„œ "íƒ€ì…ì„ ë‚˜ì¤‘ì— ì •í•´ì£¼ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ë²•"ì´ì—ìš”.  
í´ë˜ìŠ¤ë‚˜ ë©”ì„œë“œë¥¼ ë§Œë“¤ ë•Œ êµ¬ì²´ì ì¸ íƒ€ì… ëŒ€ì‹  `<T>` ê°™ì€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì¨ë†“ê³ , ì‹¤ì œ ì‚¬ìš©í•  ë•Œ `List<String>`, `List<Integer>` ì´ëŸ° ì‹ìœ¼ë¡œ ì›í•˜ëŠ” íƒ€ì…ì„ ì§€ì •í•˜ëŠ” ê±°ì£ .  
ì´ë ‡ê²Œ í•˜ë©´ í•˜ë‚˜ì˜ ì½”ë“œë¡œ ì—¬ëŸ¬ íƒ€ì…ì„ ì•ˆì „í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆì–´ì„œ, ì½”ë“œ ì¬ì‚¬ìš©ì„±ë„ ë†’ì•„ì§€ê³  íƒ€ì… ì˜¤ë¥˜ë„ ë¯¸ë¦¬ ì¡ì„ ìˆ˜ ìˆì–´ìš”.

## ì™œ ì œë„¤ë¦­ì„ ë°°ì›Œì•¼ í• ê¹Œìš”?

ë‹¤ìŒ ì½”ë“œë¥¼ ì‚´í´ë³´ì„¸ìš”. ì–´ë–¤ ë¬¸ì œê°€ ìˆì„ê¹Œìš”?

```java
// ì œë„¤ë¦­ ì´ì „ì˜ ì½”ë“œ
List userList = new ArrayList();
userList.add("Alice");
userList.add("Bob");
userList.add(123); // ì‹¤ìˆ˜ë¡œ ì •ìˆ˜ë¥¼ ì¶”ê°€!

for (Object obj : userList) {
    String name = (String) obj; // ëŸ°íƒ€ì„ì— ClassCastException ë°œìƒ!
    System.out.println("ì‚¬ìš©ì: " + name);
}
```

ì´ ì½”ë“œëŠ” ì»´íŒŒì¼ì€ ì„±ê³µí•˜ì§€ë§Œ ì‹¤í–‰í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ë¬¸ì œë¥¼ ëŸ°íƒ€ì„ì— ë°œê²¬í•˜ê²Œ ë˜ì£ .

ì œë„¤ë¦­ì„ ì‚¬ìš©í•˜ë©´ ì´ëŸ° ë¬¸ì œë¥¼ ì»´íŒŒì¼ ì‹œì ì— ì¡ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```java
// ì œë„¤ë¦­ì„ ì‚¬ìš©í•œ ì½”ë“œ
List<String> userList = new ArrayList<>();
userList.add("Alice");
userList.add("Bob");
userList.add(123); // ì»´íŒŒì¼ ì˜¤ë¥˜! ì»´íŒŒì¼ëŸ¬ê°€ ì¦‰ì‹œ ì•Œë ¤ì¤Œ

for (String name : userList) {
    System.out.println("ì‚¬ìš©ì: " + name); // ìºìŠ¤íŒ… ë¶ˆí•„ìš”!
}
```

> **::ğŸ’¡í•µì‹¬ í¬ì¸íŠ¸**: ì œë„¤ë¦­ì€ ë²„ê·¸ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ì»´íŒŒì¼ ì‹œì ìœ¼ë¡œ ì˜®ê²¨ì„œ ë” ì•ˆì „í•œ ì½”ë“œë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

## Java ì œë„¤ë¦­ì´ í•´ê²°í•˜ëŠ” ì„¸ ê°€ì§€ í•µì‹¬ ë¬¸ì œ

### 1. íƒ€ì… ì•ˆì „ì„± (Type Safety)
ì»´íŒŒì¼ëŸ¬ê°€ ì˜ëª»ëœ íƒ€ì… ì‚¬ìš©ì„ ë¯¸ë¦¬ ê°ì§€í•©ë‹ˆë‹¤.

### 2. ìºìŠ¤íŒ… ì œê±° (Casting Elimination)
ëª…ì‹œì ì¸ íƒ€ì… ìºìŠ¤íŒ…ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤.

### 3. ì½”ë“œ ì¬ì‚¬ìš© (Code Reusability)
í•˜ë‚˜ì˜ ì½”ë“œë¡œ ì—¬ëŸ¬ íƒ€ì…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì œë„¤ë¦­ ê¸°ë³¸ ë¬¸ë²•

### ì œë„¤ë¦­ í´ë˜ìŠ¤ ë§Œë“¤ê¸°

ê°€ì¥ ê°„ë‹¨í•œ ì˜ˆì œë¶€í„° ì‹œì‘í•´ë³´ê² ìŠµë‹ˆë‹¤:

```java
// ì–´ë–¤ íƒ€ì…ì´ë“  ë‹´ì„ ìˆ˜ ìˆëŠ” ìƒì
public class Box<T> {
    
    private T item;
    
    public void put(T item) {
        this.item = item;
    }
    
    public T get() {
        return this.item;
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
Box<String> stringBox = new Box<>();
stringBox.put("ì•ˆë…•í•˜ì„¸ìš”");
String message = stringBox.get(); // ìºìŠ¤íŒ… ë¶ˆí•„ìš”!

Box<Integer> integerBox = new Box<>();
integerBox.put(42);
Integer number = integerBox.get();
```

> **ğŸ’¡Tip**: `T`ëŠ” ê´€ë¡€ì ìœ¼ë¡œ "Type"ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. `E`(Element), `K`(Key), `V`(Value) ë“±ë„ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.

### ì œë„¤ë¦­ ë©”ì„œë“œ ì‘ì„±í•˜ê¸°

í´ë˜ìŠ¤ ì „ì²´ê°€ ì•„ë‹Œ íŠ¹ì • ë©”ì„œë“œë§Œ ì œë„¤ë¦­ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

```java
public class ArrayUtils {
    // ë°°ì—´ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ì œë„¤ë¦­ ë©”ì„œë“œ
    public static <T> List<T> arrayToList(T[] array) {
        List<T> list = new ArrayList<>();
        for (T item : array) {
            list.add(item);
        }
        return list;
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
String[] names = {"Alice", "Bob", "Charlie"};
List<String> nameList = ArrayUtils.arrayToList(names);

Integer[] numbers = {1, 2, 3, 4, 5};
List<Integer> numberList = ArrayUtils.arrayToList(numbers);
```

### ì œë„¤ë¦­ê³¼ ê¸°ë³¸ íƒ€ì…ì˜ ê´€ê³„

**âš ï¸ ì£¼ì˜ì‚¬í•­**: ì œë„¤ë¦­ì€ ì°¸ì¡° íƒ€ì…ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
// âŒ ë¶ˆê°€ëŠ¥
List<int> numbers = new ArrayList<>();

// âœ… ê°€ëŠ¥ (ë˜í¼ í´ë˜ìŠ¤ ì‚¬ìš©)
List<Integer> numbers = new ArrayList<>();
numbers.add(42); // ì˜¤í† ë°•ì‹±ìœ¼ë¡œ ìë™ ë³€í™˜
int value = numbers.get(0); // ì–¸ë°•ì‹±ìœ¼ë¡œ ìë™ ë³€í™˜
```

> **ì™œ ì´ëŸ° ì œì•½ì´ ìˆì„ê¹Œìš”?** ì´ëŠ” ìë°”ì˜ íƒ€ì… ì†Œê±°(Type Erasure) ë°©ì‹ ë•Œë¬¸ì…ë‹ˆë‹¤. ë’¤ì—ì„œ ìì„¸íˆ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

## ì»¬ë ‰ì…˜ê³¼ ì œë„¤ë¦­: ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´

### List ì»¬ë ‰ì…˜ í™œìš©

```java
// ArrayList: ë¹ ë¥¸ ì¡°íšŒ, ìˆœì„œ ë³´ì¥
List<String> fruits = new ArrayList<>();
fruits.add("ì‚¬ê³¼");
fruits.add("ë°”ë‚˜ë‚˜");
fruits.add("ì˜¤ë Œì§€");

// LinkedList: ë¹ ë¥¸ ì‚½ì…/ì‚­ì œ
List<String> tasks = new LinkedList<>();
tasks.add("í”„ë¡œì íŠ¸ ê³„íš");
tasks.add("ì½”ë“œ ë¦¬ë·°");

// ì œë„¤ë¦­ ë•ë¶„ì— íƒ€ì… ì•ˆì „í•œ ìˆœíšŒ
for (String fruit : fruits) {
    System.out.println("ê³¼ì¼: " + fruit);
}
```

### Map ì»¬ë ‰ì…˜ í™œìš©

```java
// ì‚¬ìš©ì IDì™€ ì´ë¦„ì„ ë§¤í•‘
Map<Long, String> userMap = new HashMap<>();
userMap.put(1L, "ê¹€ì² ìˆ˜");
userMap.put(2L, "ì´ì˜í¬");

// íƒ€ì… ì•ˆì „í•œ ì¡°íšŒ
String userName = userMap.get(1L); // String íƒ€ì… ë³´ì¥
```

### Set ì»¬ë ‰ì…˜ í™œìš©

```java
// ì¤‘ë³µ ì—†ëŠ” íƒœê·¸ ê´€ë¦¬
Set<String> tags = new HashSet<>();
tags.add("Java");
tags.add("Spring");
tags.add("Java"); // ì¤‘ë³µì€ ë¬´ì‹œë¨

System.out.println("íƒœê·¸ ê°œìˆ˜: " + tags.size()); // 2
```

## ì™€ì¼ë“œì¹´ë“œ

ì™€ì¼ë“œì¹´ë“œ(`?`)ëŠ” ì œë„¤ë¦­ì˜ ì—„ê²©í•¨ì„ ì ì ˆíˆ ì™„í™”í•´ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.

### ë¬´ì œí•œ ì™€ì¼ë“œì¹´ë“œ (`<?>`)

ì–´ë–¤ íƒ€ì…ì´ë“  ìƒê´€ì—†ì´ ì²˜ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤:

```java
public static void printListSize(List<?> list) {
    System.out.println("ë¦¬ìŠ¤íŠ¸ í¬ê¸°: " + list.size());
    // íƒ€ì…ì— ìƒê´€ì—†ì´ í¬ê¸°ë§Œ ì¶œë ¥
}

// ëª¨ë“  íƒ€ì…ì˜ ë¦¬ìŠ¤íŠ¸ì— ì‚¬ìš© ê°€ëŠ¥
printListSize(Arrays.asList("a", "b", "c"));        // List<String>
printListSize(Arrays.asList(1, 2, 3));             // List<Integer>
printListSize(Arrays.asList(true, false));         // List<Boolean>
```

### ìƒí•œ ê²½ê³„ ì™€ì¼ë“œì¹´ë“œ (`<? extends T>`)

"`T`ë¥¼ ìƒì†ë°›ëŠ” ì–´ë–¤ íƒ€ì…ì˜ ë¦¬ìŠ¤íŠ¸"

"T ë˜ëŠ” Tì˜ í•˜ìœ„ íƒ€ì…"ì„ í—ˆìš©í•©ë‹ˆë‹¤. **ë°ì´í„°ë¥¼ ì½ì„ ë•Œ** ìœ ìš©í•©ë‹ˆë‹¤:

```java
// Numberì™€ ê·¸ í•˜ìœ„ íƒ€ì…ë“¤(Integer, Double ë“±)ì„ ì²˜ë¦¬
public static double sum(List<? extends Number> numbers) {
    double total = 0.0;
    for (Number num : numbers) {
        total += num.doubleValue(); // Numberì˜ ë©”ì„œë“œ ì‚¬ìš© ê°€ëŠ¥
    }
    return total;
}

// ì‚¬ìš© ì˜ˆì‹œ
List<Integer> integers = Arrays.asList(1, 2, 3);
List<Double> doubles = Arrays.asList(1.5, 2.5, 3.5);

System.out.println(sum(integers)); // 6.0
System.out.println(sum(doubles));  // 7.5
```

### í•˜í•œ ê²½ê³„ ì™€ì¼ë“œì¹´ë“œ (`<? super T>`)

"Tì˜ ë¶€ëª¨ê°€ ë˜ëŠ” ì–´ë–¤(`?`) íƒ€ì…ì˜ ë¦¬ìŠ¤íŠ¸"

"T ë˜ëŠ” Tì˜ ìƒìœ„ íƒ€ì…"ì„ í—ˆìš©í•©ë‹ˆë‹¤. **ë°ì´í„°ë¥¼ ì“¸ ë•Œ** ìœ ìš©í•©ë‹ˆë‹¤:  

```java
// Integerì™€ ê·¸ ìƒìœ„ íƒ€ì…ë“¤(Number, Object ë“±)ì— ë°ì´í„° ì¶”ê°€
public static void addNumbers(List<? super Integer> list) {
    list.add(1);
    list.add(2);
    list.add(3);
    // IntegerëŠ” ìƒìœ„ íƒ€ì…ë“¤ì— ì•ˆì „í•˜ê²Œ í• ë‹¹ ê°€ëŠ¥
}

// ì‚¬ìš© ì˜ˆì‹œ
List<Number> numberList = new ArrayList<>();
List<Object> objectList = new ArrayList<>();

addNumbers(numberList); // OK
addNumbers(objectList); // OK
```

## íƒ€ì… ì†Œê±°: ì œë„¤ë¦­ì˜ ë‚´ë¶€ ë™ì‘ ì›ë¦¬

### íƒ€ì… ì†Œê±°ë€?

Java ì»´íŒŒì¼ëŸ¬ëŠ” ì œë„¤ë¦­ ì •ë³´ë¥¼ ì»´íŒŒì¼ ì‹œì ì—ë§Œ ì‚¬ìš©í•˜ê³ , ì‹¤í–‰ ì‹œì ì—ëŠ” ì œê±°í•©ë‹ˆë‹¤.

```java
// ì»´íŒŒì¼ ì „
List<String> stringList = new ArrayList<String>();
List<Integer> integerList = new ArrayList<Integer>();

// ì»´íŒŒì¼ í›„ (ë°”ì´íŠ¸ì½”ë“œ)
List stringList = new ArrayList();
List integerList = new ArrayList();
```

### ì™œ íƒ€ì… ì†Œê±°ë¥¼ ì„ íƒí–ˆì„ê¹Œ?

"í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë¼"

1. **í•˜ìœ„ í˜¸í™˜ì„±**: ê¸°ì¡´ ì½”ë“œì™€ ì™„ë²½í•˜ê²Œ í˜¸í™˜
2. **ì„±ëŠ¥**: ëŸ°íƒ€ì„ ì˜¤ë²„í—¤ë“œ ì—†ìŒ
3. **ë‹¨ìˆœì„±**: JVM ë³€ê²½ ìµœì†Œí™”

### íƒ€ì… ì†Œê±°ë¡œ ì¸í•œ ì œì•½ì‚¬í•­

#### 1. ì œë„¤ë¦­ íƒ€ì…ìœ¼ë¡œ ê°ì²´ ìƒì„± ë¶ˆê°€

```java
public class GenericClass<T> {
    // âŒ ë¶ˆê°€ëŠ¥
    public T createInstance() {
        return new T(); // ì»´íŒŒì¼ ì˜¤ë¥˜
    }
    
    // âœ… í•´ê²°ì±…: Class ê°ì²´ ì‚¬ìš©
    private Class<T> type;
    
    public GenericClass(Class<T> type) {
        this.type = type;
    }
    
    public T createInstance() throws Exception {
        return type.newInstance();
    }
}
```

#### 2. ì œë„¤ë¦­ ë°°ì—´ ìƒì„± ë¶ˆê°€

```java
// âŒ ë¶ˆê°€ëŠ¥
List<String>[] stringLists = new List<String>[10];

// âœ… í•´ê²°ì±…
@SuppressWarnings("unchecked")
List<String>[] stringLists = new List[10];
```

#### 3. instanceof ì—°ì‚° ë¶ˆê°€

```java
List<String> stringList = new ArrayList<>();

// âŒ ë¶ˆê°€ëŠ¥
if (stringList instanceof List<String>) { }

// âœ… ê°€ëŠ¥
if (stringList instanceof List) { }
```

## ì‹¤ë¬´ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. API ì„¤ê³„ ì‹œ ì œë„¤ë¦­ í™œìš©

```java
// ì¢‹ì€ ì˜ˆ: ëª…í™•í•œ íƒ€ì… ì •ë³´ ì œê³µ
public interface UserRepository<T extends User> {
    T findById(Long id);
    List<T> findAll();
    T save(T user);
}

// êµ¬í˜„
public class AdminRepository implements UserRepository<Admin> {
    
    @Override
    public Admin findById(Long id) {
        // Admin íƒ€ì… ë³´ì¥
        return adminDao.findById(id);
    }
}
```

### 2. ë©”ì„œë“œ ì²´ì´ë‹ê³¼ ì œë„¤ë¦­

```java
public class Builder<T> {
    
    private T object;
    
    public Builder<T> with(Function<T, T> modifier) {
        this.object = modifier.apply(this.object);
        return this; // íƒ€ì… ì•ˆì „í•œ ì²´ì´ë‹
    }
    
    public T build() {
        return object;
    }
}
```

### 3. ì˜ˆì™¸ ì²˜ë¦¬ì™€ ì œë„¤ë¦­

```java
public class Result<T, E extends Exception> {
    
    private final T value;
    private final E error;
    
    private Result(T value, E error) {
        this.value = value;
        this.error = error;
    }
    
    public static <T> Result<T, ?> success(T value) {
        return new Result<>(value, null);
    }
    
    public static <E extends Exception> Result<?, E> failure(E error) {
        return new Result<>(null, error);
    }
    
    public boolean isSuccess() {
        return error == null;
    }
    
    public T getValue() {
        if (error != null) {
            throw new IllegalStateException("Result has error");
        }
        return value;
    }
}
```

## ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### 1. ì˜¤í† ë°•ì‹±/ì–¸ë°•ì‹± ë¹„ìš©

```java
// ì„±ëŠ¥ì´ ì¤‘ìš”í•œ ê²½ìš° ì£¼ì˜
List<Integer> numbers = new ArrayList<>();
for (int i = 0; i < 1000000; i++) {
    numbers.add(i); // ì˜¤í† ë°•ì‹± ë°œìƒ
}

// ëŒ€ì•ˆ: ê¸°ë³¸ íƒ€ì… íŠ¹í™” ì»¬ë ‰ì…˜ ì‚¬ìš©
TIntList numbers = new TIntArrayList(); // Trove ë¼ì´ë¸ŒëŸ¬ë¦¬
```

### 2. ì œë„¤ë¦­ ë©”ì„œë“œ vs ì œë„¤ë¦­ í´ë˜ìŠ¤

```java
// ì œë„¤ë¦­ ë©”ì„œë“œ (ê¶Œì¥)
public static <T> void swap(T[] array, int i, int j) {
    T temp = array[i];
    array[i] = array[j];
    array[j] = temp;
}

// ì œë„¤ë¦­ í´ë˜ìŠ¤ëŠ” ìƒíƒœê°€ í•„ìš”í•  ë•Œë§Œ ì‚¬ìš©
public class ArraySwapper<T> {
    public void swap(T[] array, int i, int j) {
        // ìƒíƒœ ìœ ì§€ê°€ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©
    }
}
```

## ì¼ë°˜ì ì¸ ì‹¤ìˆ˜ì™€ í•´ê²° ë°©ë²•

### 1. Raw Type ì‚¬ìš©

```java
// âŒ ë‚˜ìœ ì˜ˆ
List list = new ArrayList();
list.add("ë¬¸ìì—´");
list.add(123);

// âœ… ì¢‹ì€ ì˜ˆ
List<String> list = new ArrayList<>();
list.add("ë¬¸ìì—´");
// list.add(123); // ì»´íŒŒì¼ ì˜¤ë¥˜
```

### 2. ì™€ì¼ë“œì¹´ë“œ ë‚¨ìš©

```java
// âŒ ë¶ˆí•„ìš”í•œ ì™€ì¼ë“œì¹´ë“œ
public void process(List<?> items) {
    // itemsì—ì„œ ë­”ê°€ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŒ
}

// âœ… ì ì ˆí•œ ì œë„¤ë¦­ ì‚¬ìš©
public <T> void process(List<T> items) {
    for (T item : items) {
        // item ì‚¬ìš© ê°€ëŠ¥
    }
}
```

### 3. ì œë„¤ë¦­ ì˜ˆì™¸ ì²˜ë¦¬

```java
// âŒ ì œë„¤ë¦­ ì˜ˆì™¸ëŠ” catch ë¶ˆê°€
try {
    // ì–´ë–¤ ì‘ì—…
} catch (T e) { // ì»´íŒŒì¼ ì˜¤ë¥˜
    // ...
}

// âœ… ë°”ìš´ë“œ ì‚¬ìš©
public <T extends Exception> void handle(T exception) throws T {
    // ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§
    throw exception;
}
```

## PECS : Producer-Extends, Consumer-Super

PECSì˜ í•µì‹¬ ê°œë…ì€ ì œë„¤ë¦­ ì»¬ë ‰ì…˜ ë§¤ê°œë³€ìˆ˜ê°€ ì£¼ë¡œ ë°ì´í„°ì˜ ì†ŒìŠ¤(ì¦‰, "ìƒì‚°ì") ì—­í• ì„ í•˜ëŠ”ì§€ ë˜ëŠ” ë°ì´í„°ì˜ ëŒ€ìƒ(ì¦‰, "ì†Œë¹„ì") ì—­í• ì„ í•˜ëŠ”ì§€ì— ë”°ë¼ 'í•œì •ì  ì™€ì¼ë“œì¹´ë“œ'(? extends T ë˜ëŠ” ? super T)ë¥¼ ì ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

### ê¸°ë³¸ ë™ë¬¼ ê³„ì¸µêµ¬ì¡° ì˜ˆì œ

ì˜ˆì œë¥¼ ìœ„í•œ ê¸°ë³¸ í´ë˜ìŠ¤ë“¤ì„ ì •ì˜í•´ë³´ê² ìŠµë‹ˆë‹¤:

```java
// ê¸°ë³¸ ë™ë¬¼ í´ë˜ìŠ¤
abstract class Animal {
    protected String name;
    
    public Animal(String name) {
        this.name = name;
    }
    
    public abstract void makeSound();
    public String getName() { return name; }
}

// êµ¬ì²´ì ì¸ ë™ë¬¼ë“¤
class Dog extends Animal {
    public Dog(String name) { super(name); }
    
    @Override
    public void makeSound() { 
        System.out.println(name + " says: Woof!"); 
    }
    
    public void fetch() { 
        System.out.println(name + " is fetching!"); 
    }
}

class Cat extends Animal {
    public Cat(String name) { super(name); }
    
    @Override
    public void makeSound() { 
        System.out.println(name + " says: Meow!"); 
    }
    
    public void climb() { 
        System.out.println(name + " is climbing!"); 
    }
}

class Rabbit extends Animal {
    public Rabbit(String name) { super(name); }
    
    @Override
    public void makeSound() { 
        System.out.println(name + " says: Thump!"); 
    }
    
    public void hop() { 
        System.out.println(name + " is hopping!"); 
    }
}
```

### í´ë˜ìŠ¤ ê³„ì¸µêµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨

```mermaid
classDiagram
    class Animal {
        <<abstract>>
        -String name
        +Animal(String name)
        +makeSound()* void
        +getName() String
    }
    
    class Dog {
        +Dog(String name)
        +makeSound() void
        +fetch() void
    }
    
    class Cat {
        +Cat(String name)
        +makeSound() void
        +climb() void
    }
    
    class Rabbit {
        +Rabbit(String name)
        +makeSound() void
        +hop() void
    }
    
    Animal <|-- Dog
    Animal <|-- Cat
    Animal <|-- Rabbit
```

### ë¶ˆë³€ì„± ë¬¸ì œ: ì™œ `List<Dog>`ëŠ” `List<Animal>`ì´ ì•„ë‹Œê°€?

```mermaid
graph TD
    A[Dog extends Animal] --> B{ì œë„¤ë¦­ ì„œë¸Œíƒ€ì´í•‘?}
    B -->|âŒ NO| C[ì œë„¤ë¦­ì€ ë¶ˆë³€ì„±]
    B -->|ìœ„í—˜| D["Listì— Cat ì¶”ê°€ ìœ„í—˜!"]
    
    C --> E[íƒ€ì… ì•ˆì „ì„± ë³´ì¥]
    E --> F[ì»´íŒŒì¼ íƒ€ì„ ì˜¤ë¥˜ ê°ì§€]
    F --> G[ëŸ°íƒ€ì„ ì˜¤ë¥˜ ë°©ì§€]
    
    style B fill:#ffcccc
    style C fill:#ccffcc
    style E fill:#ccffcc
```

## PECS ì›ì¹™ ì´í•´í•˜ê¸°

### PECSë€?

**PECS** = **Producer-Extends, Consumer-Super**

â­ PECS ê´€ì  (ì»¬ë ‰ì…˜ ì¤‘ì‹¬):

```java
// ë¦¬ìŠ¤íŠ¸ê°€ ë°ì´í„°ë¥¼ "ìƒì‚°í•´ì„œ" ë‚˜ì—ê²Œ ì¤€ë‹¤
Dog dog = list.get(0); // Producer = ì½ê¸°

// ë¦¬ìŠ¤íŠ¸ê°€ ë°ì´í„°ë¥¼ "ì†Œë¹„í•´ì„œ" ë°›ì•„ë“¤ì¸ë‹¤
list.add(new Dog("ë©ë©ì´")); // Consumer = ì“°ê¸°
```

```mermaid
mindmap
  root)PECS(
    (Producer)
      ? extends T
      ë°ì´í„°ë¥¼ ì½ê¸°
      ìƒì‚°ì ì—­í• 
      ìƒí•œ ê²½ê³„
    (Consumer)
      ? super T
      ë°ì´í„°ë¥¼ ì“°ê¸°
      ì†Œë¹„ì ì—­í• 
      í•˜í•œ ê²½ê³„
```

### íƒ€ì… ê°€ë³€ì„± ë¹„êµí‘œ

| íƒ€ì… | ì„œë¸Œíƒ€ì´í•‘ | ì½ê¸° | ì“°ê¸° | ì˜ˆì œ |
|------|------------|------|------|------|
| `List<Animal>` | ë¶ˆë³€ì„± | âœ… Animal | âœ… Animal | ì •í™•í•œ íƒ€ì…ë§Œ |
| `List<? extends Animal>` | ê³µë³€ì„± | âœ… Animal | âŒ (nullë§Œ) | Dog, Cat ë¦¬ìŠ¤íŠ¸ ì½ê¸° |
| `List<? super Dog>` | ë°˜ê³µë³€ì„± | âŒ (Objectë§Œ) | âœ… Dog | Dogë¥¼ Animal ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ |
| `List<?>` | ë¬´ì œí•œ | âŒ (Objectë§Œ) | âŒ (nullë§Œ) | ì•Œ ìˆ˜ ì—†ëŠ” íƒ€ì… |

### PECS ê²°ì • í”Œë¡œìš°ì°¨íŠ¸

```mermaid
flowchart TD
    A[ì œë„¤ë¦­ ë§¤ê°œë³€ìˆ˜ ì‚¬ìš©] --> B{ì»¬ë ‰ì…˜ì˜ ì—­í• ?}
    
    B -->|ë°ì´í„°ë¥¼ ì½ê¸°ë§Œ| C[Producer<br/>? extends T]
    B -->|ë°ì´í„°ë¥¼ ì“°ê¸°ë§Œ| D[Consumer<br/>? super T]
    B -->|ì½ê¸°ì™€ ì“°ê¸° ëª¨ë‘| E[ì •í™•í•œ íƒ€ì…<br/>List&lt;T&gt;]
    
    C --> F[ì˜ˆ: List&lt;? extends Animal&gt;<br/>ëª¨ë“  ë™ë¬¼ ë¦¬ìŠ¤íŠ¸ ì½ê¸°]
    D --> G[ì˜ˆ: List&lt;? super Dog&gt;<br/>Dogë¥¼ ë„£ì„ ìˆ˜ ìˆëŠ” ë¦¬ìŠ¤íŠ¸]
    E --> H[ì˜ˆ: List&lt;Animal&gt;<br/>Animalë§Œ ì •í™•íˆ]
    
    style C fill:#e1f5fe
    style D fill:#f3e5f5
    style E fill:#e8f5e8
```

---

## Producer-Extends ìƒì„¸ ê°€ì´ë“œ

### ê°œë…: "ì»¬ë ‰ì…˜ì—ì„œ ë°ì´í„°ë¥¼ ìƒì‚°(ì½ê¸°)"

```mermaid
graph LR
    A["List<? extends Animal>"] --> B[ë°ì´í„° ì½ê¸°ë§Œ ê°€ëŠ¥]
    
    B --> C["List<Dog> âœ…"]
    B --> D["List<Cat> âœ…"]
    B --> E["List<Rabbit> âœ…"]
    B --> F["List<Animal> âœ…"]
    
    G[ìƒˆ ë°ì´í„° ì¶”ê°€] --> H["âŒ ë¶ˆê°€ëŠ¥ (nullë§Œ í—ˆìš©)"]
    
    style A fill:#e1f5fe
    style H fill:#ffebee
```

### ì‹¤ì œ ì˜ˆì œ: ë™ë¬¼ì› ì†Œë¦¬ ì¬ìƒê¸°

```java
public class AnimalSoundPlayer {
    
    // âœ… Producer-Extends ì‚¬ìš©
    public static void playAllSounds(List<? extends Animal> animals) {
        System.out.println("=== ë™ë¬¼ì› ì†Œë¦¬ ì¬ìƒ ===");
        for (Animal animal : animals) {
            animal.makeSound(); // ì½ê¸°ë§Œ ê°€ëŠ¥
        }
        
        // animals.add(new Cat("ìƒˆ ê³ ì–‘ì´")); // âŒ ì»´íŒŒì¼ ì—ëŸ¬!
        // animals.add(null); // âœ… ì˜¤ì§ nullë§Œ ì¶”ê°€ ê°€ëŠ¥
    }
    
    // ì‚¬ìš© ì˜ˆì œ
    public static void main(String[] args) {
        List<Dog> dogs = Arrays.asList(
            new Dog("ë©ë©ì´"), 
            new Dog("ë°”ë‘‘ì´")
        );
        
        List<Cat> cats = Arrays.asList(
            new Cat("ì•¼ì˜¹ì´"), 
            new Cat("ë‚˜ë¹„")
        );
        
        List<Animal> mixedAnimals = Arrays.asList(
            new Dog("ê°•ì•„ì§€"), 
            new Cat("ê³ ì–‘ì´"), 
            new Rabbit("í† ë¼")
        );
        
        // ëª¨ë“  ë¦¬ìŠ¤íŠ¸ê°€ í˜¸í™˜ ê°€ëŠ¥!
        playAllSounds(dogs);     // âœ…
        playAllSounds(cats);     // âœ…
        playAllSounds(mixedAnimals); // âœ…
    }
}
```

### Producer-Extends ë™ì‘ ì›ë¦¬

```mermaid
sequenceDiagram
    participant Client
    participant Method as Producer Method
    participant List as Animal List
    
    Client->>Method: dogs (List of Dog)
    Method->>List: for each animal
    List->>Method: Dog instance (read as Animal)
    Method->>List: animal.makeSound()
    
    Note over Method: âœ… ì½ê¸° ì‘ì—… ì•ˆì „
    
    Client->>Method: ìƒˆ ë™ë¬¼ ì¶”ê°€ ì‹œë„
    Method--xClient: âŒ ì»´íŒŒì¼ ì—ëŸ¬
    
    Note over Method: ì“°ê¸° ì‘ì—… ì°¨ë‹¨ìœ¼ë¡œ<br/>íƒ€ì… ì•ˆì „ì„± ë³´ì¥
```

---

## Consumer-Super ìƒì„¸ ê°€ì´ë“œ

### ê°œë…: "ì»¬ë ‰ì…˜ì´ ë°ì´í„°ë¥¼ ì†Œë¹„(ì“°ê¸°)"

```mermaid
graph LR
    A["List<? super Dog>"] --> B[Dog ë°ì´í„° ì“°ê¸° ê°€ëŠ¥]
    
    B --> C["List<Dog> âœ…"]
    B --> D["List<Animal> âœ…"]
    B --> E["List<Object> âœ…"]
    
    F[ë°ì´í„° ì½ê¸°] --> G["âŒ Objectë¡œë§Œ ê°€ëŠ¥"]
    
    style A fill:#f3e5f5
    style G fill:#ffebee
```

### ì‹¤ì œ ì˜ˆì œ: ë™ë¬¼ ìˆ˜ì§‘ê¸°

```java
public class AnimalCollector {
    
    // âœ… Consumer-Super ì‚¬ìš©
    public static void collectDogs(List<? super Dog> collection) {
        System.out.println("=== ê°•ì•„ì§€ ìˆ˜ì§‘ ì¤‘ ===");
        
        // Dogì™€ ê·¸ í•˜ìœ„ íƒ€ì… ì¶”ê°€ ê°€ëŠ¥
        collection.add(new Dog("ìƒˆ ê°•ì•„ì§€1"));
        collection.add(new Dog("ìƒˆ ê°•ì•„ì§€2"));
        
        // collection.add(new Cat("ê³ ì–‘ì´")); // âŒ ì»´íŒŒì¼ ì—ëŸ¬!
        
        // ì½ê¸°ëŠ” Objectë¡œë§Œ ê°€ëŠ¥
        for (Object obj : collection) {
            System.out.println("ìˆ˜ì§‘ëœ ê°ì²´: " + obj.getClass().getSimpleName());
            // Dog dog = (Dog) obj; // ìœ„í—˜í•œ í˜•ë³€í™˜ í•„ìš”
        }
    }
    
    // ë‹¤ì–‘í•œ ì»¬ë ‰ì…˜ íƒ€ì… í…ŒìŠ¤íŠ¸
    public static void main(String[] args) {
        List<Dog> dogList = new ArrayList<>();
        List<Animal> animalList = new ArrayList<>();
        List<Object> objectList = new ArrayList<>();
        
        // ëª¨ë“  ë¦¬ìŠ¤íŠ¸ì— Dog ì¶”ê°€ ê°€ëŠ¥!
        collectDogs(dogList);     // âœ…
        collectDogs(animalList);  // âœ…  
        collectDogs(objectList);  // âœ…
        
        System.out.println("Dog ë¦¬ìŠ¤íŠ¸ í¬ê¸°: " + dogList.size());
        System.out.println("Animal ë¦¬ìŠ¤íŠ¸ í¬ê¸°: " + animalList.size());
        System.out.println("Object ë¦¬ìŠ¤íŠ¸ í¬ê¸°: " + objectList.size());
    }
}
```

### Consumer-Super ë™ì‘ ì›ë¦¬

```mermaid
sequenceDiagram
    participant Client
    participant Method as Consumer Method
    participant List as Target List
    
    Client->>Method: animalList (List of Animal)
    Method->>List: add(new Dog())
    List->>Method: âœ… ì„±ê³µ (Dog extends Animal)
    
    Note over Method: âœ… ì“°ê¸° ì‘ì—… ì•ˆì „
    
    Method->>List: get(0) 
    List->>Method: Object (íƒ€ì… ì •ë³´ ì†ì‹¤)
    
    Note over Method: âŒ ì½ê¸°ëŠ” Objectë¡œë§Œ<br/>ëª…ì‹œì  í˜•ë³€í™˜ í•„ìš”
```

## íŠ¹ìˆ˜ ì¼€ì´ìŠ¤ì™€ ì œí•œì‚¬í•­

### ì–¸ì œ ì™€ì¼ë“œì¹´ë“œë¥¼ ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í• ê¹Œ?

```mermaid
graph TD
    A[ì œë„¤ë¦­ ë§¤ê°œë³€ìˆ˜ ì—­í• ] --> B{ì½ê¸°ì™€ ì“°ê¸° ëª¨ë‘?}
    
    B -->|YES| C[ì •í™•í•œ íƒ€ì… ì‚¬ìš©<br/>List&lt;T&gt;]
    B -->|NO| D{ì£¼ìš” ì—­í• ì€?}
    
    D -->|ì½ê¸°| E[Producer<br/>List&lt;? extends T&gt;]
    D -->|ì“°ê¸°| F[Consumer<br/>List&lt;? super T&gt;]
    
    C --> G[ì˜ˆ: swap ë©”ì„œë“œ<br/>ìš”ì†Œ êµí™˜]
    E --> H[ì˜ˆ: í•©ê³„ ê³„ì‚°<br/>ë°ì´í„° ì²˜ë¦¬]
    F --> I[ì˜ˆ: ì»¬ë ‰ì…˜ ì±„ìš°ê¸°<br/>ë°ì´í„° ì¶”ê°€]
    
    style C fill:#e8f5e8
    style G fill:#e8f5e8
```

### ì‹¤ì œ ì˜ˆì œ: ë™ë¬¼ êµí™˜ ë©”ì„œë“œ

```java
public class AnimalUtils {
    
    // âœ… ì •í™•í•œ íƒ€ì… í•„ìš” - ì½ê¸°ì™€ ì“°ê¸° ëª¨ë‘
    public static <T> void swap(List<T> list, int i, int j) {
        T temp = list.get(i);    // ì½ê¸°
        list.set(i, list.get(j)); // ì“°ê¸°
        list.set(j, temp);       // ì“°ê¸°
    }
    
    // âŒ ì™€ì¼ë“œì¹´ë“œ ì‚¬ìš© ì‹œ ë¬¸ì œì ë“¤
    public static void swapWrong1(List<?> list, int i, int j) {
        // Object temp = list.get(i); // Objectë¡œë§Œ ì½ê¸° ê°€ëŠ¥
        // list.set(i, temp); // âŒ ì»´íŒŒì¼ ì—ëŸ¬! ì“¸ ìˆ˜ ì—†ìŒ
    }
    
    public static void swapWrong2(List<? extends Animal> list, int i, int j) {
        // Animal temp = list.get(i); // ì½ê¸°ëŠ” ê°€ëŠ¥
        // list.set(i, temp); // âŒ ì»´íŒŒì¼ ì—ëŸ¬! ì“¸ ìˆ˜ ì—†ìŒ
    }
    
    // ì‚¬ìš© ì˜ˆì œ
    public static void main(String[] args) {
        List<Dog> dogs = new ArrayList<>(Arrays.asList(
            new Dog("ë°”ë‘‘ì´"), 
            new Dog("ë©ë©ì´")
        ));
        
        System.out.println("êµí™˜ ì „: " + dogs.get(0).getName() + ", " + dogs.get(1).getName());
        swap(dogs, 0, 1);
        System.out.println("êµí™˜ í›„: " + dogs.get(0).getName() + ", " + dogs.get(1).getName());
    }
}
```

### ë°˜í™˜ íƒ€ì…ê³¼ í´ë˜ìŠ¤ ì„ ì–¸ ê°€ì´ë“œë¼ì¸

```java
public class DesignGuidelines {
    
    // âŒ ë‚˜ìœ ì˜ˆ: ì™€ì¼ë“œì¹´ë“œ ë°˜í™˜ íƒ€ì…
    public List<? extends Animal> getBadAnimals() {
        return Arrays.asList(new Dog("ê°•ì•„ì§€"), new Cat("ê³ ì–‘ì´"));
        // í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ì›€!
    }
    
    // âœ… ì¢‹ì€ ì˜ˆ: êµ¬ì²´ì ì¸ ë°˜í™˜ íƒ€ì…
    public List<Animal> getGoodAnimals() {
        return Arrays.asList(new Dog("ê°•ì•„ì§€"), new Cat("ê³ ì–‘ì´"));
        // í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ê¸° ì‰¬ì›€!
    }
    
    // âŒ ë¶ˆê°€ëŠ¥: í´ë˜ìŠ¤ ì„ ì–¸ì— ì™€ì¼ë“œì¹´ë“œ ì‚¬ìš©
    // class BadAnimalContainer<? extends Animal> { } // ì»´íŒŒì¼ ì—ëŸ¬!
    
    // âœ… ì˜¬ë°”ë¥¸ í´ë˜ìŠ¤ ì„ ì–¸
    class GoodAnimalContainer<T extends Animal> {
        private T animal;
        
        public void setAnimal(T animal) { this.animal = animal; }
        public T getAnimal() { return animal; }
    }
}
```

## ì‹¤ì§ˆì ì¸ ì´ì 

### 1. ì»´íŒŒì¼ íƒ€ì„ ì•ˆì „ì„±

```mermaid
graph TD
    A[Raw íƒ€ì… ì‹œëŒ€] --> B[ëŸ°íƒ€ì„ ClassCastException]
    C[ì œë„¤ë¦­ + PECS] --> D[ì»´íŒŒì¼ íƒ€ì„ ì˜¤ë¥˜ ê°ì§€]
    
    B --> E[í”„ë¡œë•ì…˜ ì¥ì• ]
    B --> F[ë””ë²„ê¹… ì–´ë ¤ì›€]
    B --> G[ë°ì´í„° ì†ìƒ ìœ„í—˜]
    
    D --> H[ê°œë°œ ë‹¨ê³„ ì˜¤ë¥˜ ë°œê²¬]
    D --> I[ë¹ ë¥¸ í”¼ë“œë°±]
    D --> J[ì•ˆì •ì ì¸ ë°°í¬]
    
    style A fill:#ffebee
    style C fill:#e8f5e8
    style E fill:#ffcdd2
    style H fill:#c8e6c9
```

### 2. API ìœ ì—°ì„± ê·¹ëŒ€í™”

```java
public class FlexibilityExample {
    
    // âŒ ê²½ì§ëœ API - ì œë„¤ë¦­ ì—†ì´
    public static void playDogSoundsOnly(List dogs) { // Raw íƒ€ì…
        for (Object obj : dogs) {
            Dog dog = (Dog) obj; // ìœ„í—˜í•œ í˜•ë³€í™˜!
            dog.makeSound();
        }
    }
    
    // âŒ ì œí•œì ì¸ API - ì •í™•í•œ íƒ€ì…ë§Œ
    public static void playDogSoundsStrict(List<Dog> dogs) {
        for (Dog dog : dogs) {
            dog.makeSound();
        }
        // List<Animal>ì´ Dogë§Œ í¬í•¨í•˜ë”ë¼ë„ ì‚¬ìš© ë¶ˆê°€!
    }
    
    // âœ… ìœ ì—°í•œ API - PECS í™œìš©
    public static void playAnimalSounds(List<? extends Animal> animals) {
        for (Animal animal : animals) {
            animal.makeSound();
        }
        // List<Dog>, List<Cat>, List<Animal> ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥!
    }
    
    public static void main(String[] args) {
        List<Dog> dogs = Arrays.asList(new Dog("ë°”ë‘‘ì´"));
        List<Cat> cats = Arrays.asList(new Cat("ì•¼ì˜¹ì´"));
        List<Animal> animals = Arrays.asList(new Dog("ë©ë©ì´"), new Cat("ë‚˜ë¹„"));
        
        // ëª¨ë“  ì»¬ë ‰ì…˜ì´ ê°™ì€ ë©”ì„œë“œë¡œ ì²˜ë¦¬ ê°€ëŠ¥!
        playAnimalSounds(dogs);
        playAnimalSounds(cats);
        playAnimalSounds(animals);
    }
}
```

### 3. ì½”ë“œ ì¬ì‚¬ìš©ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±

```mermaid
graph LR
    A[ë‹¨ì¼ ì œë„¤ë¦­ ë©”ì„œë“œ] --> B[ë‹¤ì–‘í•œ íƒ€ì… ì§€ì›]
    B --> C[ì½”ë“œ ì¤‘ë³µ ì œê±°]
    C --> D[ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ì ˆê°]
    
    E[ëª…í™•í•œ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜] --> F[ìì²´ ë¬¸ì„œí™”]
    F --> G[íŒ€ í˜‘ì—… í–¥ìƒ]
    G --> H[ê°œë°œ ìƒì‚°ì„± ì¦ëŒ€]
    
    style A fill:#e3f2fd
    style E fill:#f3e5f5
```

## ì‹¤ì œ í™œìš© ì‚¬ë¡€

### Java Collections Framework ì˜ˆì œ

```java
import java.util.*;

public class JCFExamples {
    
    public static void demonstrateCollectionsCopy() {
        // Collections.copyì˜ ì‹¤ì œ ì‹œê·¸ë‹ˆì²˜:
        // public static <T> void copy(List<? super T> dest, List<? extends T> src)
        
        List<Animal> animals = new ArrayList<>(Arrays.asList(
            null, null, null // ë¯¸ë¦¬ ê³µê°„ í™•ë³´
        ));
        
        List<Dog> dogs = Arrays.asList(
            new Dog("ë°”ë‘‘ì´"),
            new Dog("ë©ë©ì´"),
            new Dog("ëˆ„ë ì´")
        );
        
        // Dog ë¦¬ìŠ¤íŠ¸ â†’ Animal ë¦¬ìŠ¤íŠ¸ë¡œ ë³µì‚¬
        Collections.copy(animals, dogs);
        
        System.out.println("=== ë³µì‚¬ ê²°ê³¼ ===");
        for (Animal animal : animals) {
            animal.makeSound();
        }
    }
    
    public static void demonstrateLinkedListConstructor() {
        // LinkedList(Collection<? extends E> c) ìƒì„±ì í™œìš©
        
        List<Dog> dogs = Arrays.asList(
            new Dog("ë°”ë‘‘ì´"),
            new Dog("ë©ë©ì´")
        );
        
        // Dog ì»¬ë ‰ì…˜ìœ¼ë¡œ Animal LinkedList ìƒì„±
        LinkedList<Animal> animalLinkedList = new LinkedList<>(dogs);
        
        System.out.println("=== LinkedList ìƒì„± ê²°ê³¼ ===");
        for (Animal animal : animalLinkedList) {
            animal.makeSound();
        }
    }
    
    public static void main(String[] args) {
        demonstrateCollectionsCopy();
        demonstrateLinkedListConstructor();
    }
}
```

### Stream APIì™€ PECS ì›ë¦¬

```java
import java.util.*;
import java.util.stream.*;

public class StreamPECSExample {
    
    // Stream APIì—ì„œ PECS ì›ë¦¬ í™œìš©
    public static void demonstrateStreamProducer() {
        List<Dog> dogs = Arrays.asList(
            new Dog("ë°”ë‘‘ì´"),
            new Dog("ë©ë©ì´"),
            new Dog("ëˆ„ë ì´")
        );
        
        List<Cat> cats = Arrays.asList(
            new Cat("ì•¼ì˜¹ì´"),
            new Cat("ë‚˜ë¹„"),
            new Cat("ì¹˜ì¦ˆ")
        );
        
        // Producer-Extends ì›ë¦¬ë¡œ ë‹¤ì–‘í•œ ë™ë¬¼ ë¦¬ìŠ¤íŠ¸ ì²˜ë¦¬
        processAnimalStream(dogs.stream());
        processAnimalStream(cats.stream());
    }
    
    // Stream<? extends Animal>ì„ ë°›ëŠ” ë©”ì„œë“œ
    public static void processAnimalStream(Stream<? extends Animal> animalStream) {
        System.out.println("=== ë™ë¬¼ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ===");
        animalStream
            .peek(animal -> System.out.println("ì²˜ë¦¬ ì¤‘: " + animal.getName()))
            .forEach(Animal::makeSound);
    }
    
    // Consumer-Super ì›ë¦¬ë¡œ ê²°ê³¼ ìˆ˜ì§‘
    public static void demonstrateStreamConsumer() {
        List<Dog> dogs = Arrays.asList(
            new Dog("ë°”ë‘‘ì´"),
            new Dog("ë©ë©ì´")
        );
        
        // ë‹¤ì–‘í•œ íƒ€ì…ì˜ ì»¬ë ‰ì…˜ì— ìˆ˜ì§‘ ê°€ëŠ¥
        List<Animal> animalList = new ArrayList<>();
        List<Object> objectList = new ArrayList<>();
        
        collectAnimals(dogs.stream(), animalList);
        collectAnimals(dogs.stream(), objectList);
    }
    
    public static void collectAnimals(Stream<? extends Animal> stream, 
                                     Collection<? super Animal> collection) {
        stream.forEach(collection::add); // Consumer-Super í™œìš©
    }
    
    public static void main(String[] args) {
        demonstrateStreamProducer();
        demonstrateStreamConsumer();
    }
}
```

## ê³ ê¸‰ PECS íŒ¨í„´

### ì œë„¤ë¦­ ë©”ì„œë“œì™€ PECS ê²°í•©

```java
public class AdvancedPECSPatterns {
    
    // ë³µí•© PECS íŒ¨í„´: ë‘ ì»¬ë ‰ì…˜ ê°„ ë³€í™˜
    public static <T, R> List<R> transformAnimals(
            List<? extends T> source,           // Producer
            List<? super R> destination,        // Consumer  
            Function<T, R> transformer) {       // ë³€í™˜ í•¨ìˆ˜
        
        List<R> result = new ArrayList<>();
        
        for (T item : source) {
            R transformed = transformer.apply(item);
            destination.add(transformed);
            result.add(transformed);
        }
        
        return result;
    }
    
    // ì‹¤ì œ ì‚¬ìš© ì˜ˆì œ
    public static void demonstrateTransformation() {
        List<Dog> dogs = Arrays.asList(
            new Dog("ë°”ë‘‘ì´"),
            new Dog("ë©ë©ì´")
        );
        
        List<Animal> animalList = new ArrayList<>();
        
        // Dog â†’ Animal ë³€í™˜ (ì‹¤ì œë¡œëŠ” ì—…ìºìŠ¤íŒ…)
        List<Animal> result = transformAnimals(
            dogs,                    // List<Dog> (? extends Dog)
            animalList,              // List<Animal> (? super Animal)
            dog -> (Animal) dog      // Function<Dog, Animal>
        );
        
        System.out.println("=== ë³€í™˜ ê²°ê³¼ ===");
        result.forEach(Animal::makeSound);
    }
    
    // ì™€ì¼ë“œì¹´ë“œ ìº¡ì²˜ íŒ¨í„´
    public static void wildcardCapture(List<?> list) {
        wildcardCaptureHelper(list);
    }
    
    private static <T> void wildcardCaptureHelper(List<T> list) {
        // ì´ì œ T íƒ€ì…ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì‘ì—… ê°€ëŠ¥
        if (!list.isEmpty()) {
            T first = list.get(0);
            list.set(0, first); // ê°™ì€ íƒ€ì…ì´ë¯€ë¡œ ì•ˆì „
        }
    }
    
    public static void main(String[] args) {
        demonstrateTransformation();
        
        // ì™€ì¼ë“œì¹´ë“œ ìº¡ì²˜ ì˜ˆì œ
        List<Dog> dogs = new ArrayList<>(Arrays.asList(new Dog("ë°”ë‘‘ì´")));
        wildcardCapture(dogs);
    }
}
```

### PECS íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ

```mermaid
flowchart TD
    A[ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ] --> B{ì–´ë–¤ ì—ëŸ¬?}
    
    B -->|"cannot add"| C[Consumer í•„ìš”<br/>? super T ì‚¬ìš©]
    B -->|"cannot cast"| D[Producer í•„ìš”<br/>? extends T ì‚¬ìš©]
    B -->|"both read/write"| E[ì •í™•í•œ íƒ€ì…<br/>ì •í™•í•œ íƒ€ì… ì‚¬ìš©]
    
    C --> F["ì˜ˆ: list.add(dog)<br/>List<? super Dog>"]
    D --> G["ì˜ˆ: Dog d = list.get(0)<br/>List<? extends Dog>"]
    E --> H["ì˜ˆ: swap(list, i, j)<br/>List<Dog>"]
    
    style C fill:#f3e5f5
    style D fill:#e1f5fe
    style E fill:#e8f5e8
```

## ì‹¤ë¬´ ì ìš© ê°€ì´ë“œ

### 1. API ì„¤ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸

```java
public class APIDesignChecklist {
    
    // âœ… ì¢‹ì€ API ì„¤ê³„ ì˜ˆì œë“¤
    
    // ì½ê¸° ì „ìš© ì²˜ë¦¬ ë©”ì„œë“œ
    public static double calculateTotalWeight(List<? extends Animal> animals) {
        return animals.stream()
                     .mapToDouble(animal -> 10.0) // ê°€ì •: ëª¨ë“  ë™ë¬¼ 10kg
                     .sum();
    }
    
    // ì“°ê¸° ì „ìš© ì²˜ë¦¬ ë©”ì„œë“œ  
    public static void addMultipleDogs(List<? super Dog> collection, int count) {
        for (int i = 0; i < count; i++) {
            collection.add(new Dog("ê°•ì•„ì§€" + i));
        }
    }
    
    // ì½ê¸°+ì“°ê¸° ì²˜ë¦¬ ë©”ì„œë“œ
    public static <T extends Animal> void shuffleAnimals(List<T> animals) {
        Collections.shuffle(animals);
    }
    
    // ëª…í™•í•œ ë°˜í™˜ íƒ€ì…
    public static List<Animal> createMixedAnimals() {
        return Arrays.asList(
            new Dog("ê°•ì•„ì§€"),
            new Cat("ê³ ì–‘ì´"),
            new Rabbit("í† ë¼")
        );
    }
}
```

### 2. ì¼ë°˜ì ì¸ ì‹¤ìˆ˜ì™€ í•´ê²°ì±…

```java
public class CommonMistakes {
    
    // âŒ ì‹¤ìˆ˜ 1: ë¶ˆí•„ìš”í•œ ì™€ì¼ë“œì¹´ë“œ ë‚¨ìš©
    public static void mistake1(List<? extends String> strings) {
        // Stringì€ final í´ë˜ìŠ¤ì´ë¯€ë¡œ extends ì˜ë¯¸ì—†ìŒ
        // List<String>ì´ ë” ì ì ˆ
    }
    
    // âœ… ê°œì„ 
    public static void correct1(List<String> strings) {
        // ëª…í™•í•˜ê³  ê°„ë‹¨
    }
    
    // âŒ ì‹¤ìˆ˜ 2: ë°˜í™˜ íƒ€ì…ì— ì™€ì¼ë“œì¹´ë“œ ì‚¬ìš©
    public static List<? extends Animal> mistake2() {
        return Arrays.asList(new Dog("ê°•ì•„ì§€"));
        // í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ì›€
    }
    
    // âœ… ê°œì„   
    public static List<Animal> correct2() {
        return Arrays.asList(new Dog("ê°•ì•„ì§€"));
        // í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ê¸° ì‰¬ì›€
    }
    
    // âŒ ì‹¤ìˆ˜ 3: ì˜ëª»ëœ PECS ì ìš©
    public static void mistake3(List<? super Animal> animals) {
        // Animal animal = animals.get(0); // âŒ ì»´íŒŒì¼ ì—ëŸ¬!
        // animalsì—ì„œ ì½ìœ¼ë ¤ëŠ”ë° superë¥¼ ì‚¬ìš©
    }
    
    // âœ… ê°œì„ 
    public static void correct3(List<? extends Animal> animals) {
        Animal animal = animals.get(0); // âœ… ì •ìƒ ì‘ë™
    }
}
```

### 3. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

```mermaid
graph TD
    A[PECS ì‚¬ìš©] --> B[ì»´íŒŒì¼ íƒ€ì„ ìµœì í™”]
    B --> C[íƒ€ì… ì†Œê±° í›„ ì„±ëŠ¥ ì˜í–¥ ì—†ìŒ]
    
    D[ëŸ°íƒ€ì„ í˜•ë³€í™˜ ì œê±°] --> E[ClassCastException ë°©ì§€]
    E --> F[ì•ˆì •ì ì¸ ì„±ëŠ¥]
    
    G[ê°œë°œ ì‹œì  ì´ì ] --> H[ë¹ ë¥¸ í”¼ë“œë°±]
    H --> I[ê°œë°œ ìƒì‚°ì„± í–¥ìƒ]
    
    style A fill:#e3f2fd
    style D fill:#e8f5e8
    style G fill:#fff3e0
```

## ê²°ë¡ 

### PECS ë§ˆìŠ¤í„°ë¥¼ ìœ„í•œ í•µì‹¬ ìš”ì•½

```mermaid
mindmap
  root)PECS ë§ˆìŠ¤í„°ë¦¬(
    (í•µì‹¬ ì›ì¹™)
      Producer â†’ extends
      Consumer â†’ super
      Both â†’ ì •í™•í•œ íƒ€ì…
      ì»¬ë ‰ì…˜ ê´€ì ì—ì„œ ìƒê°
    (ì‹¤ë¬´ ì ìš©)
      API ìœ ì—°ì„± ê·¹ëŒ€í™”
      ì»´íŒŒì¼ íƒ€ì„ ì•ˆì „ì„±
      ì½”ë“œ ì¬ì‚¬ìš©ì„± í–¥ìƒ
      ìì²´ ë¬¸ì„œí™” íš¨ê³¼
    (ì£¼ì˜ì‚¬í•­)
      ë°˜í™˜ íƒ€ì… ì™€ì¼ë“œì¹´ë“œ ê¸ˆì§€
      í´ë˜ìŠ¤ ì„ ì–¸ ì™€ì¼ë“œì¹´ë“œ ê¸ˆì§€
      ë¶ˆí•„ìš”í•œ ì™€ì¼ë“œì¹´ë“œ ë‚¨ìš© ë°©ì§€
      ì„±ëŠ¥ì€ ê±±ì • ì—†ìŒ
```

### ë§ˆë¬´ë¦¬

ì œë„¤ë¦­ì´ ì²˜ìŒ ë„ì…ë˜ì—ˆì„ ë•Œ, ë§ì€ ê°œë°œìë“¤ì´ ë³µì¡í•˜ë‹¤ê³  ëŠê¼ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ PECS ì›ì¹™ì„ ì´í•´í•˜ê³  ë‚˜ë©´, ì œë„¤ë¦­ì´ ì–¼ë§ˆë‚˜ ìš°ì•„í•˜ê³  ê°•ë ¥í•œ ë„êµ¬ì¸ì§€ ê¹¨ë‹«ê²Œ ë©ë‹ˆë‹¤.

**ê¸°ì–µí•˜ì„¸ìš”:**
- **Producer**ëŠ” ë°ì´í„°ë¥¼ **ìƒì‚°(ì½ê¸°)**í•©ë‹ˆë‹¤ â†’ `? extends T`
- **Consumer**ëŠ” ë°ì´í„°ë¥¼ **ì†Œë¹„(ì“°ê¸°)**í•©ë‹ˆë‹¤ â†’ `? super T`
- **ë‘˜ ë‹¤** í•„ìš”í•˜ë©´ â†’ ì •í™•í•œ íƒ€ì… `T`

ì´ ê°„ë‹¨í•œ ê·œì¹™ë§Œ ê¸°ì–µí•˜ë©´, íƒ€ì… ì•ˆì „í•˜ê³  ìœ ì—°í•œ Java ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

